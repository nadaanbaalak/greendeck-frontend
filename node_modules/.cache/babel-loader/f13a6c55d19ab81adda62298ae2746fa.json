{"ast":null,"code":"/**\n * Binary Search Bounds\n * https://github.com/mikolalysenko/interval-tree-1d\n * Mikola Lysenko\n *\n * Inlined because of Content Security Policy issue caused by the use of `new Function(...)` syntax in an upstream dependency.\n * Issue reported here: https://github.com/mikolalysenko/binary-search-bounds/issues/5\n **/\nimport bounds from './binarySearchBounds';\nvar NOT_FOUND = 0;\nvar SUCCESS = 1;\nvar EMPTY = 2;\n\nfunction IntervalTreeNode(mid, left, right, leftPoints, rightPoints) {\n  this.mid = mid;\n  this.left = left;\n  this.right = right;\n  this.leftPoints = leftPoints;\n  this.rightPoints = rightPoints;\n  this.count = (left ? left.count : 0) + (right ? right.count : 0) + leftPoints.length;\n}\n\nvar proto = IntervalTreeNode.prototype;\n\nfunction copy(a, b) {\n  a.mid = b.mid;\n  a.left = b.left;\n  a.right = b.right;\n  a.leftPoints = b.leftPoints;\n  a.rightPoints = b.rightPoints;\n  a.count = b.count;\n}\n\nfunction rebuild(node, intervals) {\n  var ntree = createIntervalTree(intervals);\n  node.mid = ntree.mid;\n  node.left = ntree.left;\n  node.right = ntree.right;\n  node.leftPoints = ntree.leftPoints;\n  node.rightPoints = ntree.rightPoints;\n  node.count = ntree.count;\n}\n\nfunction rebuildWithInterval(node, interval) {\n  var intervals = node.intervals([]);\n  intervals.push(interval);\n  rebuild(node, intervals);\n}\n\nfunction rebuildWithoutInterval(node, interval) {\n  var intervals = node.intervals([]);\n  var idx = intervals.indexOf(interval);\n\n  if (idx < 0) {\n    return NOT_FOUND;\n  }\n\n  intervals.splice(idx, 1);\n  rebuild(node, intervals);\n  return SUCCESS;\n}\n\nproto.intervals = function (result) {\n  result.push.apply(result, this.leftPoints);\n\n  if (this.left) {\n    this.left.intervals(result);\n  }\n\n  if (this.right) {\n    this.right.intervals(result);\n  }\n\n  return result;\n};\n\nproto.insert = function (interval) {\n  var weight = this.count - this.leftPoints.length;\n  this.count += 1;\n\n  if (interval[1] < this.mid) {\n    if (this.left) {\n      if (4 * (this.left.count + 1) > 3 * (weight + 1)) {\n        rebuildWithInterval(this, interval);\n      } else {\n        this.left.insert(interval);\n      }\n    } else {\n      this.left = createIntervalTree([interval]);\n    }\n  } else if (interval[0] > this.mid) {\n    if (this.right) {\n      if (4 * (this.right.count + 1) > 3 * (weight + 1)) {\n        rebuildWithInterval(this, interval);\n      } else {\n        this.right.insert(interval);\n      }\n    } else {\n      this.right = createIntervalTree([interval]);\n    }\n  } else {\n    var l = bounds.ge(this.leftPoints, interval, compareBegin);\n    var r = bounds.ge(this.rightPoints, interval, compareEnd);\n    this.leftPoints.splice(l, 0, interval);\n    this.rightPoints.splice(r, 0, interval);\n  }\n};\n\nproto.remove = function (interval) {\n  var weight = this.count - this.leftPoints;\n\n  if (interval[1] < this.mid) {\n    if (!this.left) {\n      return NOT_FOUND;\n    }\n\n    var rw = this.right ? this.right.count : 0;\n\n    if (4 * rw > 3 * (weight - 1)) {\n      return rebuildWithoutInterval(this, interval);\n    }\n\n    var r = this.left.remove(interval);\n\n    if (r === EMPTY) {\n      this.left = null;\n      this.count -= 1;\n      return SUCCESS;\n    } else if (r === SUCCESS) {\n      this.count -= 1;\n    }\n\n    return r;\n  } else if (interval[0] > this.mid) {\n    if (!this.right) {\n      return NOT_FOUND;\n    }\n\n    var lw = this.left ? this.left.count : 0;\n\n    if (4 * lw > 3 * (weight - 1)) {\n      return rebuildWithoutInterval(this, interval);\n    }\n\n    var r = this.right.remove(interval);\n\n    if (r === EMPTY) {\n      this.right = null;\n      this.count -= 1;\n      return SUCCESS;\n    } else if (r === SUCCESS) {\n      this.count -= 1;\n    }\n\n    return r;\n  } else {\n    if (this.count === 1) {\n      if (this.leftPoints[0] === interval) {\n        return EMPTY;\n      } else {\n        return NOT_FOUND;\n      }\n    }\n\n    if (this.leftPoints.length === 1 && this.leftPoints[0] === interval) {\n      if (this.left && this.right) {\n        var p = this;\n        var n = this.left;\n\n        while (n.right) {\n          p = n;\n          n = n.right;\n        }\n\n        if (p === this) {\n          n.right = this.right;\n        } else {\n          var l = this.left;\n          var r = this.right;\n          p.count -= n.count;\n          p.right = n.left;\n          n.left = l;\n          n.right = r;\n        }\n\n        copy(this, n);\n        this.count = (this.left ? this.left.count : 0) + (this.right ? this.right.count : 0) + this.leftPoints.length;\n      } else if (this.left) {\n        copy(this, this.left);\n      } else {\n        copy(this, this.right);\n      }\n\n      return SUCCESS;\n    }\n\n    for (var l = bounds.ge(this.leftPoints, interval, compareBegin); l < this.leftPoints.length; ++l) {\n      if (this.leftPoints[l][0] !== interval[0]) {\n        break;\n      }\n\n      if (this.leftPoints[l] === interval) {\n        this.count -= 1;\n        this.leftPoints.splice(l, 1);\n\n        for (var r = bounds.ge(this.rightPoints, interval, compareEnd); r < this.rightPoints.length; ++r) {\n          if (this.rightPoints[r][1] !== interval[1]) {\n            break;\n          } else if (this.rightPoints[r] === interval) {\n            this.rightPoints.splice(r, 1);\n            return SUCCESS;\n          }\n        }\n      }\n    }\n\n    return NOT_FOUND;\n  }\n};\n\nfunction reportLeftRange(arr, hi, cb) {\n  for (var i = 0; i < arr.length && arr[i][0] <= hi; ++i) {\n    var r = cb(arr[i]);\n\n    if (r) {\n      return r;\n    }\n  }\n}\n\nfunction reportRightRange(arr, lo, cb) {\n  for (var i = arr.length - 1; i >= 0 && arr[i][1] >= lo; --i) {\n    var r = cb(arr[i]);\n\n    if (r) {\n      return r;\n    }\n  }\n}\n\nfunction reportRange(arr, cb) {\n  for (var i = 0; i < arr.length; ++i) {\n    var r = cb(arr[i]);\n\n    if (r) {\n      return r;\n    }\n  }\n}\n\nproto.queryPoint = function (x, cb) {\n  if (x < this.mid) {\n    if (this.left) {\n      var r = this.left.queryPoint(x, cb);\n\n      if (r) {\n        return r;\n      }\n    }\n\n    return reportLeftRange(this.leftPoints, x, cb);\n  } else if (x > this.mid) {\n    if (this.right) {\n      var r = this.right.queryPoint(x, cb);\n\n      if (r) {\n        return r;\n      }\n    }\n\n    return reportRightRange(this.rightPoints, x, cb);\n  } else {\n    return reportRange(this.leftPoints, cb);\n  }\n};\n\nproto.queryInterval = function (lo, hi, cb) {\n  if (lo < this.mid && this.left) {\n    var r = this.left.queryInterval(lo, hi, cb);\n\n    if (r) {\n      return r;\n    }\n  }\n\n  if (hi > this.mid && this.right) {\n    var r = this.right.queryInterval(lo, hi, cb);\n\n    if (r) {\n      return r;\n    }\n  }\n\n  if (hi < this.mid) {\n    return reportLeftRange(this.leftPoints, hi, cb);\n  } else if (lo > this.mid) {\n    return reportRightRange(this.rightPoints, lo, cb);\n  } else {\n    return reportRange(this.leftPoints, cb);\n  }\n};\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction compareBegin(a, b) {\n  var d = a[0] - b[0];\n\n  if (d) {\n    return d;\n  }\n\n  return a[1] - b[1];\n}\n\nfunction compareEnd(a, b) {\n  var d = a[1] - b[1];\n\n  if (d) {\n    return d;\n  }\n\n  return a[0] - b[0];\n}\n\nfunction createIntervalTree(intervals) {\n  if (intervals.length === 0) {\n    return null;\n  }\n\n  var pts = [];\n\n  for (var i = 0; i < intervals.length; ++i) {\n    pts.push(intervals[i][0], intervals[i][1]);\n  }\n\n  pts.sort(compareNumbers);\n  var mid = pts[pts.length >> 1];\n  var leftIntervals = [];\n  var rightIntervals = [];\n  var centerIntervals = [];\n\n  for (var i = 0; i < intervals.length; ++i) {\n    var s = intervals[i];\n\n    if (s[1] < mid) {\n      leftIntervals.push(s);\n    } else if (mid < s[0]) {\n      rightIntervals.push(s);\n    } else {\n      centerIntervals.push(s);\n    }\n  } //Split center intervals\n\n\n  var leftPoints = centerIntervals;\n  var rightPoints = centerIntervals.slice();\n  leftPoints.sort(compareBegin);\n  rightPoints.sort(compareEnd);\n  return new IntervalTreeNode(mid, createIntervalTree(leftIntervals), createIntervalTree(rightIntervals), leftPoints, rightPoints);\n} //User friendly wrapper that makes it possible to support empty trees\n\n\nfunction IntervalTree(root) {\n  this.root = root;\n}\n\nvar tproto = IntervalTree.prototype;\n\ntproto.insert = function (interval) {\n  if (this.root) {\n    this.root.insert(interval);\n  } else {\n    this.root = new IntervalTreeNode(interval[0], null, null, [interval], [interval]);\n  }\n};\n\ntproto.remove = function (interval) {\n  if (this.root) {\n    var r = this.root.remove(interval);\n\n    if (r === EMPTY) {\n      this.root = null;\n    }\n\n    return r !== NOT_FOUND;\n  }\n\n  return false;\n};\n\ntproto.queryPoint = function (p, cb) {\n  if (this.root) {\n    return this.root.queryPoint(p, cb);\n  }\n};\n\ntproto.queryInterval = function (lo, hi, cb) {\n  if (lo <= hi && this.root) {\n    return this.root.queryInterval(lo, hi, cb);\n  }\n};\n\nObject.defineProperty(tproto, 'count', {\n  get: function get() {\n    if (this.root) {\n      return this.root.count;\n    }\n\n    return 0;\n  }\n});\nObject.defineProperty(tproto, 'intervals', {\n  get: function get() {\n    if (this.root) {\n      return this.root.intervals([]);\n    }\n\n    return [];\n  }\n});\nexport default function createWrapper(intervals) {\n  if (!intervals || intervals.length === 0) {\n    return new IntervalTree(null);\n  }\n\n  return new IntervalTree(createIntervalTree(intervals));\n}","map":{"version":3,"sources":["/home/nadaanbaalak/greendeck/client/node_modules/react-virtualized/dist/es/vendor/intervalTree.js"],"names":["bounds","NOT_FOUND","SUCCESS","EMPTY","IntervalTreeNode","mid","left","right","leftPoints","rightPoints","count","length","proto","prototype","copy","a","b","rebuild","node","intervals","ntree","createIntervalTree","rebuildWithInterval","interval","push","rebuildWithoutInterval","idx","indexOf","splice","result","apply","insert","weight","l","ge","compareBegin","r","compareEnd","remove","rw","lw","p","n","reportLeftRange","arr","hi","cb","i","reportRightRange","lo","reportRange","queryPoint","x","queryInterval","compareNumbers","d","pts","sort","leftIntervals","rightIntervals","centerIntervals","s","slice","IntervalTree","root","tproto","Object","defineProperty","get","createWrapper"],"mappings":"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","sourcesContent":["/**\n * Binary Search Bounds\n * https://github.com/mikolalysenko/interval-tree-1d\n * Mikola Lysenko\n *\n * Inlined because of Content Security Policy issue caused by the use of `new Function(...)` syntax in an upstream dependency.\n * Issue reported here: https://github.com/mikolalysenko/binary-search-bounds/issues/5\n **/\n\nimport bounds from './binarySearchBounds';\n\nvar NOT_FOUND = 0;\nvar SUCCESS = 1;\nvar EMPTY = 2;\n\nfunction IntervalTreeNode(mid, left, right, leftPoints, rightPoints) {\n  this.mid = mid;\n  this.left = left;\n  this.right = right;\n  this.leftPoints = leftPoints;\n  this.rightPoints = rightPoints;\n  this.count = (left ? left.count : 0) + (right ? right.count : 0) + leftPoints.length;\n}\n\nvar proto = IntervalTreeNode.prototype;\n\nfunction copy(a, b) {\n  a.mid = b.mid;\n  a.left = b.left;\n  a.right = b.right;\n  a.leftPoints = b.leftPoints;\n  a.rightPoints = b.rightPoints;\n  a.count = b.count;\n}\n\nfunction rebuild(node, intervals) {\n  var ntree = createIntervalTree(intervals);\n  node.mid = ntree.mid;\n  node.left = ntree.left;\n  node.right = ntree.right;\n  node.leftPoints = ntree.leftPoints;\n  node.rightPoints = ntree.rightPoints;\n  node.count = ntree.count;\n}\n\nfunction rebuildWithInterval(node, interval) {\n  var intervals = node.intervals([]);\n  intervals.push(interval);\n  rebuild(node, intervals);\n}\n\nfunction rebuildWithoutInterval(node, interval) {\n  var intervals = node.intervals([]);\n  var idx = intervals.indexOf(interval);\n  if (idx < 0) {\n    return NOT_FOUND;\n  }\n  intervals.splice(idx, 1);\n  rebuild(node, intervals);\n  return SUCCESS;\n}\n\nproto.intervals = function (result) {\n  result.push.apply(result, this.leftPoints);\n  if (this.left) {\n    this.left.intervals(result);\n  }\n  if (this.right) {\n    this.right.intervals(result);\n  }\n  return result;\n};\n\nproto.insert = function (interval) {\n  var weight = this.count - this.leftPoints.length;\n  this.count += 1;\n  if (interval[1] < this.mid) {\n    if (this.left) {\n      if (4 * (this.left.count + 1) > 3 * (weight + 1)) {\n        rebuildWithInterval(this, interval);\n      } else {\n        this.left.insert(interval);\n      }\n    } else {\n      this.left = createIntervalTree([interval]);\n    }\n  } else if (interval[0] > this.mid) {\n    if (this.right) {\n      if (4 * (this.right.count + 1) > 3 * (weight + 1)) {\n        rebuildWithInterval(this, interval);\n      } else {\n        this.right.insert(interval);\n      }\n    } else {\n      this.right = createIntervalTree([interval]);\n    }\n  } else {\n    var l = bounds.ge(this.leftPoints, interval, compareBegin);\n    var r = bounds.ge(this.rightPoints, interval, compareEnd);\n    this.leftPoints.splice(l, 0, interval);\n    this.rightPoints.splice(r, 0, interval);\n  }\n};\n\nproto.remove = function (interval) {\n  var weight = this.count - this.leftPoints;\n  if (interval[1] < this.mid) {\n    if (!this.left) {\n      return NOT_FOUND;\n    }\n    var rw = this.right ? this.right.count : 0;\n    if (4 * rw > 3 * (weight - 1)) {\n      return rebuildWithoutInterval(this, interval);\n    }\n    var r = this.left.remove(interval);\n    if (r === EMPTY) {\n      this.left = null;\n      this.count -= 1;\n      return SUCCESS;\n    } else if (r === SUCCESS) {\n      this.count -= 1;\n    }\n    return r;\n  } else if (interval[0] > this.mid) {\n    if (!this.right) {\n      return NOT_FOUND;\n    }\n    var lw = this.left ? this.left.count : 0;\n    if (4 * lw > 3 * (weight - 1)) {\n      return rebuildWithoutInterval(this, interval);\n    }\n    var r = this.right.remove(interval);\n    if (r === EMPTY) {\n      this.right = null;\n      this.count -= 1;\n      return SUCCESS;\n    } else if (r === SUCCESS) {\n      this.count -= 1;\n    }\n    return r;\n  } else {\n    if (this.count === 1) {\n      if (this.leftPoints[0] === interval) {\n        return EMPTY;\n      } else {\n        return NOT_FOUND;\n      }\n    }\n    if (this.leftPoints.length === 1 && this.leftPoints[0] === interval) {\n      if (this.left && this.right) {\n        var p = this;\n        var n = this.left;\n        while (n.right) {\n          p = n;\n          n = n.right;\n        }\n        if (p === this) {\n          n.right = this.right;\n        } else {\n          var l = this.left;\n          var r = this.right;\n          p.count -= n.count;\n          p.right = n.left;\n          n.left = l;\n          n.right = r;\n        }\n        copy(this, n);\n        this.count = (this.left ? this.left.count : 0) + (this.right ? this.right.count : 0) + this.leftPoints.length;\n      } else if (this.left) {\n        copy(this, this.left);\n      } else {\n        copy(this, this.right);\n      }\n      return SUCCESS;\n    }\n    for (var l = bounds.ge(this.leftPoints, interval, compareBegin); l < this.leftPoints.length; ++l) {\n      if (this.leftPoints[l][0] !== interval[0]) {\n        break;\n      }\n      if (this.leftPoints[l] === interval) {\n        this.count -= 1;\n        this.leftPoints.splice(l, 1);\n        for (var r = bounds.ge(this.rightPoints, interval, compareEnd); r < this.rightPoints.length; ++r) {\n          if (this.rightPoints[r][1] !== interval[1]) {\n            break;\n          } else if (this.rightPoints[r] === interval) {\n            this.rightPoints.splice(r, 1);\n            return SUCCESS;\n          }\n        }\n      }\n    }\n    return NOT_FOUND;\n  }\n};\n\nfunction reportLeftRange(arr, hi, cb) {\n  for (var i = 0; i < arr.length && arr[i][0] <= hi; ++i) {\n    var r = cb(arr[i]);\n    if (r) {\n      return r;\n    }\n  }\n}\n\nfunction reportRightRange(arr, lo, cb) {\n  for (var i = arr.length - 1; i >= 0 && arr[i][1] >= lo; --i) {\n    var r = cb(arr[i]);\n    if (r) {\n      return r;\n    }\n  }\n}\n\nfunction reportRange(arr, cb) {\n  for (var i = 0; i < arr.length; ++i) {\n    var r = cb(arr[i]);\n    if (r) {\n      return r;\n    }\n  }\n}\n\nproto.queryPoint = function (x, cb) {\n  if (x < this.mid) {\n    if (this.left) {\n      var r = this.left.queryPoint(x, cb);\n      if (r) {\n        return r;\n      }\n    }\n    return reportLeftRange(this.leftPoints, x, cb);\n  } else if (x > this.mid) {\n    if (this.right) {\n      var r = this.right.queryPoint(x, cb);\n      if (r) {\n        return r;\n      }\n    }\n    return reportRightRange(this.rightPoints, x, cb);\n  } else {\n    return reportRange(this.leftPoints, cb);\n  }\n};\n\nproto.queryInterval = function (lo, hi, cb) {\n  if (lo < this.mid && this.left) {\n    var r = this.left.queryInterval(lo, hi, cb);\n    if (r) {\n      return r;\n    }\n  }\n  if (hi > this.mid && this.right) {\n    var r = this.right.queryInterval(lo, hi, cb);\n    if (r) {\n      return r;\n    }\n  }\n  if (hi < this.mid) {\n    return reportLeftRange(this.leftPoints, hi, cb);\n  } else if (lo > this.mid) {\n    return reportRightRange(this.rightPoints, lo, cb);\n  } else {\n    return reportRange(this.leftPoints, cb);\n  }\n};\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction compareBegin(a, b) {\n  var d = a[0] - b[0];\n  if (d) {\n    return d;\n  }\n  return a[1] - b[1];\n}\n\nfunction compareEnd(a, b) {\n  var d = a[1] - b[1];\n  if (d) {\n    return d;\n  }\n  return a[0] - b[0];\n}\n\nfunction createIntervalTree(intervals) {\n  if (intervals.length === 0) {\n    return null;\n  }\n  var pts = [];\n  for (var i = 0; i < intervals.length; ++i) {\n    pts.push(intervals[i][0], intervals[i][1]);\n  }\n  pts.sort(compareNumbers);\n\n  var mid = pts[pts.length >> 1];\n\n  var leftIntervals = [];\n  var rightIntervals = [];\n  var centerIntervals = [];\n  for (var i = 0; i < intervals.length; ++i) {\n    var s = intervals[i];\n    if (s[1] < mid) {\n      leftIntervals.push(s);\n    } else if (mid < s[0]) {\n      rightIntervals.push(s);\n    } else {\n      centerIntervals.push(s);\n    }\n  }\n\n  //Split center intervals\n  var leftPoints = centerIntervals;\n  var rightPoints = centerIntervals.slice();\n  leftPoints.sort(compareBegin);\n  rightPoints.sort(compareEnd);\n\n  return new IntervalTreeNode(mid, createIntervalTree(leftIntervals), createIntervalTree(rightIntervals), leftPoints, rightPoints);\n}\n\n//User friendly wrapper that makes it possible to support empty trees\nfunction IntervalTree(root) {\n  this.root = root;\n}\n\nvar tproto = IntervalTree.prototype;\n\ntproto.insert = function (interval) {\n  if (this.root) {\n    this.root.insert(interval);\n  } else {\n    this.root = new IntervalTreeNode(interval[0], null, null, [interval], [interval]);\n  }\n};\n\ntproto.remove = function (interval) {\n  if (this.root) {\n    var r = this.root.remove(interval);\n    if (r === EMPTY) {\n      this.root = null;\n    }\n    return r !== NOT_FOUND;\n  }\n  return false;\n};\n\ntproto.queryPoint = function (p, cb) {\n  if (this.root) {\n    return this.root.queryPoint(p, cb);\n  }\n};\n\ntproto.queryInterval = function (lo, hi, cb) {\n  if (lo <= hi && this.root) {\n    return this.root.queryInterval(lo, hi, cb);\n  }\n};\n\nObject.defineProperty(tproto, 'count', {\n  get: function get() {\n    if (this.root) {\n      return this.root.count;\n    }\n    return 0;\n  }\n});\n\nObject.defineProperty(tproto, 'intervals', {\n  get: function get() {\n    if (this.root) {\n      return this.root.intervals([]);\n    }\n    return [];\n  }\n});\n\nexport default function createWrapper(intervals) {\n  if (!intervals || intervals.length === 0) {\n    return new IntervalTree(null);\n  }\n  return new IntervalTree(createIntervalTree(intervals));\n}"]},"metadata":{},"sourceType":"module"}